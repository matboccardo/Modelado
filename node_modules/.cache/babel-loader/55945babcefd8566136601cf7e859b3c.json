{"ast":null,"code":"// issue: https://github.com/maurizzzio/function-plot/issues/6\n// solution: the line type is selecting the derivative line when the content is re-drawn, then when the\n// derivative was redrawn an already selected line (by the line type) was used thus making a single line\n// disappear from the graph, to avoid the selection of the derivative line the selector needs to\n// work only for immediate children which is done with `:scope >`\n// src: http://stackoverflow.com/questions/6481612/queryselector-search-immediate-children\n\n/*eslint-disable */\n;\n\n(function (doc, proto) {\n  try {\n    // check if browser supports :scope natively\n    doc.querySelector(':scope body');\n  } catch (err) {\n    // polyfill native methods if it doesn't\n    ['querySelector', 'querySelectorAll'].forEach(function (method) {\n      var native = proto[method];\n\n      proto[method] = function (selectors) {\n        if (/(^|,)\\s*:scope/.test(selectors)) {\n          // only if selectors contains :scope\n          var id = this.id; // remember current element id\n\n          this.id = 'ID_' + Date.now(); // assign new unique id\n\n          selectors = selectors.replace(/((^|,)\\s*):scope/g, '$1#' + this.id); // replace :scope with #ID\n\n          var result = doc[method](selectors);\n          this.id = id; // restore previous id\n\n          return result;\n        } else {\n          return native.call(this, selectors); // use native code for other selectors\n        }\n      };\n    });\n  }\n})(window.document, Element.prototype);\n/* eslint-enable */","map":null,"metadata":{},"sourceType":"script"}