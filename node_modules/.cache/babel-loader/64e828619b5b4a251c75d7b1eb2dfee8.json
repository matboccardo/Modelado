{"ast":null,"code":"var Emitter = require('events').EventEmitter;\n\nvar vkey = require('vkey');\n\nmodule.exports = function (keys, el) {\n  if (typeof keys === 'string') keys = [keys];\n  if (!el) el = window;\n  var emitter = new Emitter();\n  emitter.pressed = {};\n  el.addEventListener('blur', clearPressed);\n  el.addEventListener('focus', clearPressed);\n  el.addEventListener('keydown', function (ev) {\n    var key = vkey[ev.keyCode];\n    emitter.pressed[key] = true;\n    var allPressed = true;\n    keys.forEach(function (k) {\n      if (!emitter.pressed[k]) allPressed = false;\n    });\n\n    if (allPressed) {\n      emitter.emit('pressed', emitter.pressed); // this seems to be necessary as keyup doesn't always fire during combos :/\n\n      clearPressed();\n    }\n  });\n  el.addEventListener('keyup', function (ev) {\n    delete emitter.pressed[vkey[ev.keyCode]];\n  });\n\n  function clearPressed() {\n    emitter.pressed = {};\n  }\n\n  return emitter;\n};","map":null,"metadata":{},"sourceType":"script"}